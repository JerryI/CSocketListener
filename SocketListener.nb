(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     46479,        975]
NotebookOptionsPosition[     42994,        909]
NotebookOutlinePosition[     43423,        926]
CellTagsIndexPosition[     43380,        923]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"$HistoryLength", " ", "=", " ", "0"}], ";"}], " "}]], "Code",
 CellChangeTimes->{{3.899130498044859*^9, 3.8991305014370317`*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"f45d236d-c245-4ecb-a4ce-88a5facc3fc7"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"SetDirectory", "[", 
    RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}], " "}]], "Code",
 CellChangeTimes->{{3.899130474929414*^9, 3.8991304866526065`*^9}},
 CellLabel->"In[2]:=",ExpressionUUID->"69c8cc3d-30da-49fa-90e5-aece21b058a6"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Get", "[", "\"\<CCompilerDriver`\>\"", "]"}], ";"}], 
  " "}]], "Code",
 CellChangeTimes->{{3.8991305812077637`*^9, 3.8991305923508463`*^9}, {
  3.8991683873154616`*^9, 3.899168387893586*^9}},
 CellLabel->"In[3]:=",ExpressionUUID->"e06d4fd0-0bb5-4ebf-9f57-62c355486680"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"libSrc", " ", "=", " ", 
    RowBox[{"File", "[", "\"\<socket_listener.c\>\"", "]"}]}], ";"}], 
  " "}]], "Code",
 CellChangeTimes->{3.8991682192141905`*^9},
 CellLabel->"In[4]:=",ExpressionUUID->"8dee5efd-81eb-4c03-ba79-249068e6660c"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"Head", "[", "createServer", "]"}], " ", "==", " ", 
      "LibraryFunction"}], ",", " ", 
     RowBox[{"LibraryFunctionUnload", "[", "createServer", "]"}]}], "]"}], 
   ";"}], " "}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"Head", "[", "createServer", "]"}], " ", "==", " ", 
      "LibraryFunction"}], ",", " ", 
     RowBox[{"LibraryFunctionUnload", "[", "socketWrite", "]"}]}], "]"}], 
   ";"}], " "}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"libBin", " ", "=", " ", 
    RowBox[{"CreateLibrary", "[", 
     RowBox[{
     "libSrc", ",", " ", "\"\<socket_listener\>\"", ",", " ", "\n", "\t", 
      RowBox[{"\"\<Debug\>\"", " ", "->", " ", "True"}], ",", " ", "\n", "\t", 
      RowBox[{"\"\<TargetDirectory\>\"", " ", "->", " ", 
       RowBox[{"Directory", "[", "]"}]}], ",", " ", "\n", "\t", 
      RowBox[{"\"\<ShellOutputFunction\>\"", " ", "->", " ", "Print"}], ",", 
      " ", "\n", "\t", 
      RowBox[{"\"\<ShellCommandFunction\>\"", " ", "->", " ", "Print"}]}], 
     "\n", "]"}]}], ";"}], " "}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"createServer", " ", "=", " ", 
    RowBox[{"LibraryFunctionLoad", "[", 
     RowBox[{"libBin", ",", " ", "\"\<create_server\>\"", ",", " ", 
      RowBox[{"{", "String", "}"}], ",", " ", "Integer"}], "]"}]}], ";"}], 
  " "}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"socketWrite", " ", "=", " ", 
    RowBox[{"LibraryFunctionLoad", "[", 
     RowBox[{"libBin", ",", " ", "\"\<socket_write\>\"", ",", " ", 
      RowBox[{"{", 
       RowBox[{
       "Integer", ",", " ", "\"\<ByteArray\>\"", ",", " ", "Integer"}], "}"}],
       ",", " ", "Integer"}], "]"}]}], ";"}], " "}]}], "Code",
 CellChangeTimes->{{3.8991305989170275`*^9, 3.899130602769633*^9}, {
   3.899130678764865*^9, 3.899130729973363*^9}, {3.8991307772256985`*^9, 
   3.899130777902764*^9}, {3.89913083787078*^9, 3.899130873284264*^9}, 
   3.8991310602123795`*^9, {3.8991311230652437`*^9, 3.8991311541238236`*^9}, {
   3.899131184253192*^9, 3.8991311847043085`*^9}, {3.899131220393905*^9, 
   3.899131234551761*^9}, {3.899131287712902*^9, 3.8991312913307996`*^9}, {
   3.8991315847092214`*^9, 3.899131597708951*^9}, {3.8991318051598167`*^9, 
   3.8991318101801834`*^9}, {3.89913284536123*^9, 3.899132868790085*^9}, {
   3.899133253139723*^9, 3.8991332578619523`*^9}, {3.8991680868167415`*^9, 
   3.899168135096826*^9}, {3.8991681855528655`*^9, 3.899168186224454*^9}, {
   3.8991683026710744`*^9, 3.899168323842782*^9}, {3.8991889381567383`*^9, 
   3.899188938840253*^9}, {3.8991891065454044`*^9, 3.899189107173616*^9}, {
   3.899190920931636*^9, 3.899190927135213*^9}, {3.8991935504517345`*^9, 
   3.899193551286889*^9}, {3.8992524025907965`*^9, 3.899252404082939*^9}, {
   3.899252577471379*^9, 3.8992525780838346`*^9}, {3.8992541505396986`*^9, 
   3.8992541538848457`*^9}, 3.8993047086219606`*^9, {3.899305157995412*^9, 
   3.8993052080096245`*^9}, {3.8993052600307894`*^9, 3.8993052765776625`*^9}},
 CellLabel->"In[5]:=",ExpressionUUID->"0886999e-13fc-42a0-8002-c68562c3a083"],

Cell[CellGroupData[{

Cell[BoxData["\<\"call \\\"C:\\\\Program Files\\\\Microsoft Visual \
Studio\\\\2022\\\\Community\\\\VC\\\\Auxiliary\\\\Build\\\\vcvarsall.bat\\\" \
amd64\\n\\n\\ncl.exe /LD /MTd /Zi  /I \\\"C:\\\\Program Files\\\\Wolfram \
Research\\\\Mathematica\\\\13.3\\\\SystemFiles\\\\IncludeFiles\\\\C\\\" /I \\\
\"C:\\\\Program Files\\\\Wolfram \
Research\\\\Mathematica\\\\13.3\\\\SystemFiles\\\\Links\\\\MathLink\\\\\
DeveloperKit\\\\Windows-x86-64\\\\CompilerAdditions\\\" \
\\\"C:\\\\Users\\\\Kirill\\\\Projects\\\\CSocketListener\\\\socket_listener.c\
\\\" /link  \
/implib:\\\"C:\\\\Users\\\\Kirill\\\\Projects\\\\CSocketListener\\\\Working-\
tuf-8524-15596-1\\\\socket_listener.lib\\\"  /LIBPATH:\\\"C:\\\\Program Files\
\\\\Wolfram \
Research\\\\Mathematica\\\\13.3\\\\SystemFiles\\\\Links\\\\MathLink\\\\\
DeveloperKit\\\\Windows-x86-64\\\\CompilerAdditions\\\" \
/LIBPATH:\\\"C:\\\\Program Files\\\\Wolfram Research\\\\Mathematica\\\\13.3\\\
\\SystemFiles\\\\Libraries\\\\Windows-x86-64\\\"  \\\"ml64i4m.lib\\\"  \
/out:\\\"C:\\\\Users\\\\Kirill\\\\Projects\\\\CSocketListener\\\\Working-tuf-\
8524-15596-1\\\\socket_listener.dll\\\"\"\>"], "Print",
 CellChangeTimes->{
  3.8991937034050484`*^9, 3.899194526582946*^9, 3.8991950660620317`*^9, 
   3.899195114895986*^9, 3.8991975153146486`*^9, 3.899197564796116*^9, 
   3.8991976415853624`*^9, 3.899197711264428*^9, 3.8991977777443867`*^9, 
   3.8991978712508607`*^9, 3.899222719180284*^9, 3.8992230963491373`*^9, 
   3.8992234695778627`*^9, 3.8992238612452517`*^9, 3.8992245333317676`*^9, 
   3.8992246279917355`*^9, 3.8992247571696053`*^9, 3.8992248858372946`*^9, 
   3.8992249336870403`*^9, 3.8992256434733305`*^9, 3.8992257891510515`*^9, 
   3.8992268308894024`*^9, 3.899227186293097*^9, 3.8992274962098308`*^9, {
   3.899249500098177*^9, 3.8992495297969637`*^9}, 3.8992500858302903`*^9, 
   3.899250156248618*^9, 3.899250332596752*^9, 3.8992515665384293`*^9, 
   3.8992524219163713`*^9, 3.8992526076231728`*^9, 3.899254185951625*^9, 
   3.8992543329727764`*^9, 3.899275786586542*^9, 3.89927606700356*^9, 
   3.8992764299191027`*^9, 3.8992766319036875`*^9, 3.8992767871104083`*^9, 
   3.8992770063844643`*^9, 3.8992770942935085`*^9, 3.8992773131549273`*^9, 
   3.8992773605742235`*^9, 3.8992781312038116`*^9, 3.8992783877976065`*^9, 
   3.8992785739568768`*^9, 3.899278609711812*^9, 3.8992786611196156`*^9, 
   3.8992787199363475`*^9, 3.899278766833229*^9, 3.899278798683072*^9, 
   3.899278837935726*^9, {3.8992788910356617`*^9, 3.8992789194797316`*^9}, 
   3.899279037960797*^9, 3.8992790769407496`*^9, 3.8992793066831117`*^9, 
   3.8992891411685066`*^9, 3.8993022036354704`*^9, 3.899302758184699*^9, 
   3.8993031345551386`*^9, 3.8993034832321243`*^9, 3.8993042072974224`*^9, 
   3.899305210511669*^9, {3.8993052533375993`*^9, 3.899305279148946*^9}, 
   3.8993068100444155`*^9, 3.899335496977732*^9},
 CellLabel->
  "During evaluation of \
In[5]:=",ExpressionUUID->"163da267-a0a8-440c-97b8-e3b530613ffa"],

Cell[BoxData["\<\"\\nC:\\\\Users\\\\Kirill\\\\Projects\\\\CSocketListener\\\\\
Working-tuf-8524-15596-1>call \\\"C:\\\\Program Files\\\\Microsoft Visual \
Studio\\\\2022\\\\Community\\\\VC\\\\Auxiliary\\\\Build\\\\vcvarsall.bat\\\" \
amd64 \\n*********************************************************************\
*\\n** Visual Studio 2022 Developer Command Prompt v17.6.3\\n** Copyright (c) \
2022 Microsoft \
Corporation\\n****************************************************************\
******\\n[vcvarsall.bat] Environment initialized for: 'x64'\\n\.8e\.af\[AHat]\
\[DoubleDot]\[Not]\[DoubleDot]\[Section]\[DoubleDot]\[AGrave]\[ATilde]\[IHat]\
\[EAcute]\[DoubleDot]\[Copyright] \.aa\[RegisteredTrademark]\[Not]\.af\
\[DoubleDot]\[LeftGuillemet]\[IDoubleDot]\[AHat]\[RegisteredTrademark]\
\[AGrave] Microsoft (R) C/C++ \[Cent]\[Yen]\[AGrave]\[AAcute]\[DoubleDot]\
\[DoubleDot] 19.36.32534 \[Currency]\[LeftGuillemet]\[IDoubleDot] x64\\n(C) \
\.8a\[RegisteredTrademark]\[AGrave]\.af\[RegisteredTrademark]\[AGrave]\
\[NonBreakingSpace]\[AE]\[DoubleDot]\[IDoubleDot] \.8c\[NonBreakingSpace]\
\[Copyright]\.aa\[AGrave]\[RegisteredTrademark]\[AAcute]\[RegisteredTrademark]\
\[ADoubleDot]\[AHat] (Microsoft Corporation).  \.82\[AAcute]\[Yen] \.af\
\[AGrave]\[NonBreakingSpace]\[Cent]\[NonBreakingSpace] \[Section]\
\[NonBreakingSpace]\[EAcute]\[DoubleDot]\[EAcute]\[Yen]\[DiscretionaryHyphen]\
\[EDoubleDot].\\n\\nsocket_listener.c\\nC:\\\\Users\\\\Kirill\\\\Projects\\\\\
CSocketListener\\\\socket_listener.c(70): warning C4477: \\\"printf\\\": \
\[Cent] \[AAcute]\[AHat]\[AGrave]\[RegisteredTrademark]\.aa\[Yen] \
\[ADoubleDot]\[RegisteredTrademark]\[AGrave]\[Not]\[NonBreakingSpace]\[AHat]\
\[DoubleDot]\[AGrave]\[RegisteredTrademark]\[Cent]\[NonBreakingSpace]\
\[DiscretionaryHyphen]\[DoubleDot]\[IDoubleDot] \\\"%d\\\" \[AHat]\[AGrave]\
\[Yen]\[DownExclamation]\[ATilde]\[Yen]\[AHat]\[AAcute]\[IDoubleDot] \
\[NonBreakingSpace]\[AGrave]\[Sterling]\[ATilde]\[Not]\[Yen]\
\[DiscretionaryHyphen]\[AHat] \[AHat]\[DoubleDot]\.af\[NonBreakingSpace] \
\\\"int\\\", \[DiscretionaryHyphen]\[RegisteredTrademark] \[Cent]\
\[NonBreakingSpace]\[AGrave]\[DoubleDot]\[NonBreakingSpace]\[AHat]\[DoubleDot]\
\[Cent]\[DiscretionaryHyphen]\[EDoubleDot]\[Copyright] \[NonBreakingSpace]\
\[AGrave]\[Sterling]\[ATilde]\[Not]\[Yen]\[DiscretionaryHyphen]\[AHat] \
\\\"1\\\" \[DoubleDot]\[Not]\[Yen]\[Yen]\[AHat] \[AHat]\[DoubleDot]\.af \
\\\"SOCKET\\\"\\nC:\\\\Users\\\\Kirill\\\\Projects\\\\CSocketListener\\\\\
socket_listener.c(70): note: \[AGrave]\[Yen]\.aa\[RegisteredTrademark]\[Not]\
\[Yen]\[DiscretionaryHyphen]\[Currency]\[ATilde]\[Yen]\[AHat]\[AAcute]\
\[IDoubleDot] \[DoubleDot]\[AAcute]\.af\[RegisteredTrademark]\[LeftGuillemet]\
\[IGrave]\[Section]\[RegisteredTrademark]\[Cent]\[NonBreakingSpace]\[AHat]\
\[IGrave] \\\"%lld\\\" \[Cent] \
\[AAcute]\[AHat]\[AGrave]\[RegisteredTrademark]\.aa\[Yen] \[ADoubleDot]\
\[RegisteredTrademark]\[AGrave]\[Not]\[NonBreakingSpace]\[AHat]\[DoubleDot]\
\[AGrave]\[RegisteredTrademark]\[Cent]\[NonBreakingSpace]\
\[DiscretionaryHyphen]\[DoubleDot]\[IDoubleDot]\\nC:\\\\Users\\\\Kirill\\\\\
Projects\\\\CSocketListener\\\\socket_listener.c(70): note: \[AGrave]\[Yen]\
\.aa\[RegisteredTrademark]\[Not]\[Yen]\[DiscretionaryHyphen]\[Currency]\
\[ATilde]\[Yen]\[AHat]\[AAcute]\[IDoubleDot] \[DoubleDot]\[AAcute]\.af\
\[RegisteredTrademark]\[LeftGuillemet]\[IGrave]\[Section]\
\[RegisteredTrademark]\[Cent]\[NonBreakingSpace]\[AHat]\[IGrave] \\\"%Id\\\" \
\[Cent] \[AAcute]\[AHat]\[AGrave]\[RegisteredTrademark]\.aa\[Yen] \
\[ADoubleDot]\[RegisteredTrademark]\[AGrave]\[Not]\[NonBreakingSpace]\[AHat]\
\[DoubleDot]\[AGrave]\[RegisteredTrademark]\[Cent]\[NonBreakingSpace]\
\[DiscretionaryHyphen]\[DoubleDot]\[IDoubleDot]\\nC:\\\\Users\\\\Kirill\\\\\
Projects\\\\CSocketListener\\\\socket_listener.c(70): note: \[AGrave]\[Yen]\
\.aa\[RegisteredTrademark]\[Not]\[Yen]\[DiscretionaryHyphen]\[Currency]\
\[ATilde]\[Yen]\[AHat]\[AAcute]\[IDoubleDot] \[DoubleDot]\[AAcute]\.af\
\[RegisteredTrademark]\[LeftGuillemet]\[IGrave]\[Section]\
\[RegisteredTrademark]\[Cent]\[NonBreakingSpace]\[AHat]\[IGrave] \
\\\"%I64d\\\" \[Cent] \[AAcute]\[AHat]\[AGrave]\[RegisteredTrademark]\.aa\
\[Yen] \[ADoubleDot]\[RegisteredTrademark]\[AGrave]\[Not]\[NonBreakingSpace]\
\[AHat]\[DoubleDot]\[AGrave]\[RegisteredTrademark]\[Cent]\[NonBreakingSpace]\
\[DiscretionaryHyphen]\[DoubleDot]\[IDoubleDot]\\nMicrosoft (R) Incremental \
Linker Version 14.36.32534.0\\nCopyright (C) Microsoft Corporation.  All \
rights reserved.\\n\\n/out:socket_listener.dll \\n/dll \
\\n/implib:socket_listener.lib \\n/debug \
\\n/implib:C:\\\\Users\\\\Kirill\\\\Projects\\\\CSocketListener\\\\Working-\
tuf-8524-15596-1\\\\socket_listener.lib \\n\\\"/LIBPATH:C:\\\\Program Files\\\
\\Wolfram Research\\\\Mathematica\\\\13.3\\\\SystemFiles\\\\Links\\\\MathLink\
\\\\DeveloperKit\\\\Windows-x86-64\\\\CompilerAdditions\\\" \
\\n\\\"/LIBPATH:C:\\\\Program Files\\\\Wolfram \
Research\\\\Mathematica\\\\13.3\\\\SystemFiles\\\\Libraries\\\\Windows-x86-64\
\\\" \\nml64i4m.lib \
\\n/out:C:\\\\Users\\\\Kirill\\\\Projects\\\\CSocketListener\\\\Working-tuf-\
8524-15596-1\\\\socket_listener.dll \\nsocket_listener.obj \\n   \.91\
\[RegisteredTrademark]\[Section]\[Currency]\[NonBreakingSpace]\[Yen]\[AHat]\
\[AAcute]\[IDoubleDot] \[DownExclamation]\[DoubleDot]\[DownExclamation]\
\[LeftGuillemet]\[DoubleDot]\[RegisteredTrademark]\[AHat]\[Yen]\.aa\
\[NonBreakingSpace] \
C:\\\\Users\\\\Kirill\\\\Projects\\\\CSocketListener\\\\Working-tuf-8524-\
15596-1\\\\socket_listener.lib \[DoubleDot] \[RegisteredTrademark]\
\[DownExclamation]\[EHat]\[Yen]\.aa\[AHat] \
C:\\\\Users\\\\Kirill\\\\Projects\\\\CSocketListener\\\\Working-tuf-8524-\
15596-1\\\\socket_listener.exp\"\>"], "Print",
 CellChangeTimes->{
  3.8991937034050484`*^9, 3.899194526582946*^9, 3.8991950660620317`*^9, 
   3.899195114895986*^9, 3.8991975153146486`*^9, 3.899197564796116*^9, 
   3.8991976415853624`*^9, 3.899197711264428*^9, 3.8991977777443867`*^9, 
   3.8991978712508607`*^9, 3.899222719180284*^9, 3.8992230963491373`*^9, 
   3.8992234695778627`*^9, 3.8992238612452517`*^9, 3.8992245333317676`*^9, 
   3.8992246279917355`*^9, 3.8992247571696053`*^9, 3.8992248858372946`*^9, 
   3.8992249336870403`*^9, 3.8992256434733305`*^9, 3.8992257891510515`*^9, 
   3.8992268308894024`*^9, 3.899227186293097*^9, 3.8992274962098308`*^9, {
   3.899249500098177*^9, 3.8992495297969637`*^9}, 3.8992500858302903`*^9, 
   3.899250156248618*^9, 3.899250332596752*^9, 3.8992515665384293`*^9, 
   3.8992524219163713`*^9, 3.8992526076231728`*^9, 3.899254185951625*^9, 
   3.8992543329727764`*^9, 3.899275786586542*^9, 3.89927606700356*^9, 
   3.8992764299191027`*^9, 3.8992766319036875`*^9, 3.8992767871104083`*^9, 
   3.8992770063844643`*^9, 3.8992770942935085`*^9, 3.8992773131549273`*^9, 
   3.8992773605742235`*^9, 3.8992781312038116`*^9, 3.8992783877976065`*^9, 
   3.8992785739568768`*^9, 3.899278609711812*^9, 3.8992786611196156`*^9, 
   3.8992787199363475`*^9, 3.899278766833229*^9, 3.899278798683072*^9, 
   3.899278837935726*^9, {3.8992788910356617`*^9, 3.8992789194797316`*^9}, 
   3.899279037960797*^9, 3.8992790769407496`*^9, 3.8992793066831117`*^9, 
   3.8992891411685066`*^9, 3.8993022036354704`*^9, 3.899302758184699*^9, 
   3.8993031345551386`*^9, 3.8993034832321243`*^9, 3.8993042072974224`*^9, 
   3.899305210511669*^9, {3.8993052533375993`*^9, 3.899305279148946*^9}, 
   3.8993068100444155`*^9, 3.899335498610349*^9},
 CellLabel->
  "During evaluation of \
In[5]:=",ExpressionUUID->"36ff6687-f7b6-466b-8a54-915c3874be1b"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"task", " ", "=", " ", 
  RowBox[{"Internal`CreateAsynchronousTask", "[", 
   RowBox[{"createServer", ",", " ", 
    RowBox[{"{", "\"\<8000\>\"", "}"}], ",", " ", 
    RowBox[{
     RowBox[{"Print", "[", 
      RowBox[{"packet", " ", "=", " ", 
       RowBox[{"{", "##", "}"}]}], "]"}], "&"}]}], "]"}]}]], "Code",
 CellChangeTimes->{{3.8991933157608366`*^9, 3.8991933446956587`*^9}, {
  3.8991935645758657`*^9, 3.8991935844792376`*^9}, {3.899194629257325*^9, 
  3.8991946595211964`*^9}, {3.899197765235455*^9, 3.8991977653208*^9}},
 CellLabel->"In[33]:=",ExpressionUUID->"c9bd0472-3c9e-4525-b3ff-7a871616b4a5"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"AsynchronousTaskObject", "[", "\<\"\"\>", ",", "1", ",", 
   RowBox[{" ", "<>"}], "]"}],
  AsynchronousTaskObject["", 1, 22939754612526428522]]], "Output",
 CellChangeTimes->{3.8993034855205207`*^9, 3.899305296754839*^9},
 CellLabel->"Out[33]=",ExpressionUUID->"4c65c589-9cde-4522-87cb-ec176dda0033"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"c1", "=", 
  RowBox[{"SocketConnect", "[", "8000", "]"}]}]], "Input",
 CellChangeTimes->{{3.899303490671558*^9, 3.8993034966183643`*^9}},
 CellLabel->"In[34]:=",ExpressionUUID->"0c133fb4-d21f-4908-bb66-9bd736862157"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
   TagBox["SocketObject",
    "SummaryHead"], "[", 
   DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
    TemplateBox[{
      PaneSelectorBox[{False -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxOpener"]], 
              ButtonFunction :> (Typeset`open$$ = True), Appearance -> None, 
              BaseStyle -> {}, Evaluator -> Automatic, Method -> 
              "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GraphicsBox[
             GeometricTransformationBox[{{{
                 FilledCurveBox[{{
                    
                    Line[{{36.558, 8.569}, {40.947, 8.569}, {40.947, 
                    43.684000000000005`}, {36.558, 43.684000000000005`}, {
                    36.558, 8.569}}]}}]}, {
                 FilledCurveBox[{{
                    
                    Line[{{59.053, 8.569}, {63.443, 8.569}, {63.443, 
                    43.684000000000005`}, {59.053, 43.684000000000005`}, {
                    59.053, 8.569}}]}}]}, {{
                  FilledCurveBox[{{
                    
                    Line[{{55.487, 8.569}, {56.95, 8.569}, {56.95, 
                    21.188000000000002`}, {55.487, 21.188000000000002`}, {
                    55.487, 8.569}}]}}]}, {
                  FilledCurveBox[{{
                    
                    Line[{{52.562, 8.569}, {54.025, 8.569}, {54.025, 
                    21.188000000000002`}, {52.562, 21.188000000000002`}, {
                    52.562, 8.569}}]}}]}, {
                  FilledCurveBox[{{
                    
                    Line[{{49.636, 8.569}, {51.099000000000004`, 8.569}, {
                    51.099000000000004`, 21.188000000000002`}, {49.636, 
                    21.188000000000002`}, {49.636, 8.569}}]}}]}, {
                  FilledCurveBox[{{
                    
                    Line[{{46.709, 8.569}, {48.172000000000004`, 8.569}, {
                    48.172000000000004`, 21.188000000000002`}, {46.709, 
                    21.188000000000002`}, {46.709, 8.569}}]}}]}, {
                  FilledCurveBox[{{
                    
                    Line[{{43.783, 8.569}, {45.246, 8.569}, {45.246, 
                    21.188000000000002`}, {43.783, 21.188000000000002`}, {
                    43.783, 8.569}}]}}]}}, {
                 FilledCurveBox[{{
                    
                    Line[{{40.947, 4.911}, {59.787000000000006`, 4.911}, {
                    59.787000000000006`, 6.922}, {40.947, 6.922}, {40.947, 
                    4.911}}]}}]}, {
                 FilledCurveBox[{{
                    
                    Line[{{44.057, 31.675}, {56.678000000000004`, 31.675}, {
                    56.678000000000004`, 39.051}, {44.057, 39.051}, {44.057, 
                    31.675}}]}}]}, {
                 FilledCurveBox[{{
                    
                    Line[{{44.057, 43.685}, {56.678000000000004`, 43.685}, {
                    56.678000000000004`, 65.089}, {44.057, 65.089}, {44.057, 
                    43.685}}]}}]}}}, {{{1, 0}, {0, -1}}, Center}], {
             ImageSize -> {Automatic, 
                Dynamic[
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                  Magnification])]}, PlotRange -> {{20, 80}, {0, 70}}, 
              BaseStyle -> {CacheGraphics -> False}, ImageSize -> 30}], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Foreign IPAddress: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["\"127.0.0.1\"", "SummaryItem"]}], 
               RowBox[{
                 TagBox["\"Foreign Port: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["8000", "SummaryItem"]}], 
               RowBox[{
                 TagBox["\"Protocol: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  TemplateBox[{"\"TCP\"", 
                    TagBox[
                    "\" (Client)\"", Deploy, DefaultBaseStyle -> "Deploy"]}, 
                   "RowDefault"], "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"UUID: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                 "\"6b07fb52-310e-461a-829a-77d5fd642482\"", "SummaryItem"]}],
                "\[SpanFromLeft]", "\[SpanFromLeft]"}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}], True -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxCloser"]], 
              ButtonFunction :> (Typeset`open$$ = False), Appearance -> None, 
              BaseStyle -> {}, Evaluator -> Automatic, Method -> 
              "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GraphicsBox[
             GeometricTransformationBox[{{{
                 FilledCurveBox[{{
                    
                    Line[{{36.558, 8.569}, {40.947, 8.569}, {40.947, 
                    43.684000000000005`}, {36.558, 43.684000000000005`}, {
                    36.558, 8.569}}]}}]}, {
                 FilledCurveBox[{{
                    
                    Line[{{59.053, 8.569}, {63.443, 8.569}, {63.443, 
                    43.684000000000005`}, {59.053, 43.684000000000005`}, {
                    59.053, 8.569}}]}}]}, {{
                  FilledCurveBox[{{
                    
                    Line[{{55.487, 8.569}, {56.95, 8.569}, {56.95, 
                    21.188000000000002`}, {55.487, 21.188000000000002`}, {
                    55.487, 8.569}}]}}]}, {
                  FilledCurveBox[{{
                    
                    Line[{{52.562, 8.569}, {54.025, 8.569}, {54.025, 
                    21.188000000000002`}, {52.562, 21.188000000000002`}, {
                    52.562, 8.569}}]}}]}, {
                  FilledCurveBox[{{
                    
                    Line[{{49.636, 8.569}, {51.099000000000004`, 8.569}, {
                    51.099000000000004`, 21.188000000000002`}, {49.636, 
                    21.188000000000002`}, {49.636, 8.569}}]}}]}, {
                  FilledCurveBox[{{
                    
                    Line[{{46.709, 8.569}, {48.172000000000004`, 8.569}, {
                    48.172000000000004`, 21.188000000000002`}, {46.709, 
                    21.188000000000002`}, {46.709, 8.569}}]}}]}, {
                  FilledCurveBox[{{
                    
                    Line[{{43.783, 8.569}, {45.246, 8.569}, {45.246, 
                    21.188000000000002`}, {43.783, 21.188000000000002`}, {
                    43.783, 8.569}}]}}]}}, {
                 FilledCurveBox[{{
                    
                    Line[{{40.947, 4.911}, {59.787000000000006`, 4.911}, {
                    59.787000000000006`, 6.922}, {40.947, 6.922}, {40.947, 
                    4.911}}]}}]}, {
                 FilledCurveBox[{{
                    
                    Line[{{44.057, 31.675}, {56.678000000000004`, 31.675}, {
                    56.678000000000004`, 39.051}, {44.057, 39.051}, {44.057, 
                    31.675}}]}}]}, {
                 FilledCurveBox[{{
                    
                    Line[{{44.057, 43.685}, {56.678000000000004`, 43.685}, {
                    56.678000000000004`, 65.089}, {44.057, 65.089}, {44.057, 
                    43.685}}]}}]}}}, {{{1, 0}, {0, -1}}, Center}], {
             ImageSize -> {Automatic, 
                Dynamic[
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                  Magnification])]}, PlotRange -> {{20, 80}, {0, 70}}, 
              BaseStyle -> {CacheGraphics -> False}, ImageSize -> 30}], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Foreign IPAddress: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["\"127.0.0.1\"", "SummaryItem"]}], 
               RowBox[{
                 TagBox["\"Foreign Port: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["8000", "SummaryItem"]}], 
               RowBox[{
                 TagBox["\"Protocol: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  TemplateBox[{"\"TCP\"", 
                    TagBox[
                    "\" (Client)\"", Deploy, DefaultBaseStyle -> "Deploy"]}, 
                   "RowDefault"], "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"UUID: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                 "\"6b07fb52-310e-461a-829a-77d5fd642482\"", "SummaryItem"]}],
                "\[SpanFromLeft]", "\[SpanFromLeft]"}, {
               RowBox[{
                 TagBox["\"Endpoint: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  RowBox[{"{", "}"}], "SummaryItem"]}], "\[SpanFromLeft]", 
               "\[SpanFromLeft]"}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}]}, 
       Dynamic[Typeset`open$$], ImageSize -> Automatic]},
     "SummaryPanel"],
    DynamicModuleValues:>{}], "]"}],
  SocketObject["6b07fb52-310e-461a-829a-77d5fd642482"],
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{3.8993034980475845`*^9, 3.8993053014191556`*^9},
 CellLabel->"Out[34]=",ExpressionUUID->"78a5c2e0-09cb-4dc4-a2eb-b85a044835b0"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"WriteString", "[", 
  RowBox[{"c1", ",", " ", "\"\<hello\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.8993053217078953`*^9, 3.8993053308174987`*^9}},
 CellLabel->"In[35]:=",ExpressionUUID->"880dfb84-0259-44b3-a6aa-82ad00882bdf"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"socketWrite", "[", 
  RowBox[{
   RowBox[{"packet", "[", 
    RowBox[{"[", 
     RowBox[{
      RowBox[{"-", "1"}], ",", " ", "2"}], "]"}], "]"}], ",", " ", 
   RowBox[{"StringToByteArray", "[", "\"\<hi\>\"", "]"}], ",", " ", "2"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.899305337444008*^9, 3.899305365303196*^9}},
 CellLabel->"In[38]:=",ExpressionUUID->"ea9970a7-6ca2-4b42-ab92-943f0227309e"],

Cell[BoxData["0"], "Output",
 CellChangeTimes->{{3.899305339891141*^9, 3.8993053685305676`*^9}},
 CellLabel->"Out[38]=",ExpressionUUID->"b3472b0e-b84f-4877-869e-4f784d320aa1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SocketReadyQ", "[", "c1", "]"}]], "Input",
 CellChangeTimes->{{3.8993053710092435`*^9, 3.899305374599742*^9}},
 CellLabel->"In[39]:=",ExpressionUUID->"74677c24-aca5-4478-b5a3-4bc209d0bb22"],

Cell[BoxData["True"], "Output",
 CellChangeTimes->{3.899305375370347*^9},
 CellLabel->"Out[39]=",ExpressionUUID->"75ab1f59-b9b2-4b34-89de-9cbaa72b5628"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SocketReadMessage", "[", "c1", "]"}]], "Input",
 CellChangeTimes->{{3.899305377114152*^9, 3.8993053801493225`*^9}},
 CellLabel->"In[40]:=",ExpressionUUID->"fac8bb0a-097d-4e7d-ad3c-208f75b76bf4"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
   TagBox["ByteArray",
    "SummaryHead"], "[", 
   DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
    TemplateBox[{
      PaneSelectorBox[{False -> GridBox[{{
            GridBox[{{
               TagBox["\"2 bytes\"", "SummaryItem"]}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}], True -> GridBox[{{
            GridBox[{{
               TagBox["\"2 bytes\"", "SummaryItem"]}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}]}, 
       Dynamic[Typeset`open$$], ImageSize -> Automatic]},
     "SummaryPanel"],
    DynamicModuleValues:>{}], "]"}],
  ByteArray[{104, 105}],
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{3.8993053805952854`*^9},
 CellLabel->"Out[40]=",ExpressionUUID->"96f35c3e-a848-44ba-a865-42be7b388d85"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ByteArrayToString", "[", 
  InterpretationBox[
   RowBox[{
    TagBox["ByteArray",
     "SummaryHead"], "[", 
    DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
     TemplateBox[{
       PaneSelectorBox[{False -> GridBox[{{
             GridBox[{{
                TagBox["\"2 bytes\"", "SummaryItem"]}}, 
              GridBoxAlignment -> {
               "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
              False, GridBoxItemSize -> {
               "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
              GridBoxSpacings -> {
               "Columns" -> {{2}}, "Rows" -> {{Automatic}}}, 
              BaseStyle -> {
               ShowStringCharacters -> False, NumberMarks -> False, 
                PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
           GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
           AutoDelete -> False, 
           GridBoxItemSize -> {
            "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
           BaselinePosition -> {1, 1}], True -> GridBox[{{
             GridBox[{{
                TagBox["\"2 bytes\"", "SummaryItem"]}}, 
              GridBoxAlignment -> {
               "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
              False, GridBoxItemSize -> {
               "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
              GridBoxSpacings -> {
               "Columns" -> {{2}}, "Rows" -> {{Automatic}}}, 
              BaseStyle -> {
               ShowStringCharacters -> False, NumberMarks -> False, 
                PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
           GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
           AutoDelete -> False, 
           GridBoxItemSize -> {
            "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
           BaselinePosition -> {1, 1}]}, 
        Dynamic[Typeset`open$$], ImageSize -> Automatic]},
      "SummaryPanel"],
     DynamicModuleValues:>{}], "]"}],
   ByteArray[{104, 105}],
   Editable->False,
   SelectWithContents->True,
   Selectable->False], "]"}]], "Input",
 CellChangeTimes->{{3.8993053853765616`*^9, 3.8993053900475817`*^9}},
 CellLabel->"In[41]:=",ExpressionUUID->"4c899f28-3243-4bf6-a58e-ec2969c2298c"],

Cell[BoxData["\<\"hi\"\>"], "Output",
 CellChangeTimes->{3.8993053904713697`*^9},
 CellLabel->"Out[41]=",ExpressionUUID->"d1f6d004-a795-4c91-a75f-4118f56f8cb9"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"AbsoluteTiming", "[", 
  RowBox[{"socketWrite", "[", 
   RowBox[{
    RowBox[{"packet", "[", 
     RowBox[{"[", 
      RowBox[{
       RowBox[{"-", "1"}], ",", " ", "2"}], "]"}], "]"}], ",", " ", 
    RowBox[{"StringToByteArray", "[", 
     RowBox[{"StringJoin", "[", 
      RowBox[{"Table", "[", 
       RowBox[{"\"\<=\>\"", ",", " ", "10000000"}], "]"}], "]"}], "]"}], ",", 
    " ", "10000000"}], "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.899305404450567*^9, 3.899305479733599*^9}, {
  3.8993055580507503`*^9, 3.899305565350385*^9}},
 CellLabel->"In[54]:=",ExpressionUUID->"dff05c68-9db6-4343-a3dd-79346509fae9"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0.3798071`", ",", "0"}], "}"}]], "Output",
 CellChangeTimes->{{3.89930543294284*^9, 3.899305493004751*^9}, 
   3.8993055664352093`*^9},
 CellLabel->"Out[54]=",ExpressionUUID->"eb9b314d-3ec4-4a95-a6aa-9431c37bb154"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"m", "=", 
  RowBox[{"{", "}"}]}]], "Input",
 CellChangeTimes->{{3.89930554157029*^9, 3.8993055425442266`*^9}},
 CellLabel->"In[53]:=",ExpressionUUID->"7829c353-9c75-46a5-bd9f-16f6b14b2b80"],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellChangeTimes->{3.8993055430471687`*^9},
 CellLabel->"Out[53]=",ExpressionUUID->"d6627bad-c9ab-4bcf-a466-798642808cbb"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"While", "[", 
  RowBox[{
   RowBox[{"SocketReadyQ", "[", "c1", "]"}], ",", " ", 
   RowBox[{"AppendTo", "[", 
    RowBox[{"m", ",", " ", 
     RowBox[{"SocketReadMessage", "[", "c1", "]"}]}], "]"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.899305377114152*^9, 3.8993053801493225`*^9}, {
  3.8993054951906905`*^9, 3.8993055530168667`*^9}},
 CellLabel->"In[55]:=",ExpressionUUID->"d0fe3f2f-db55-4053-9206-205e7c69cc82"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Join", "@@", "m"}]], "Input",
 CellChangeTimes->{{3.8993055801262636`*^9, 3.8993055968547325`*^9}},
 CellLabel->"In[57]:=",ExpressionUUID->"31d9d88f-549c-48bd-81be-e6e9ba016178"],

Cell[BoxData[
 TagBox[
  TemplateBox[{
    RowBox[{
      StyleBox[
       TagBox["ByteArray", "SummaryHead"], "NonInterpretableSummary"], 
      StyleBox["[", "NonInterpretableSummary"], 
      DynamicModuleBox[{
       Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
       TemplateBox[{
         TemplateBox[{
           PaneSelectorBox[{False -> GridBox[{{
                 GridBox[{{
                    TagBox["\"10.0 MB\"", "SummaryItem"]}}, 
                  GridBoxAlignment -> {
                   "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
                  AutoDelete -> False, 
                  GridBoxItemSize -> {
                   "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                  GridBoxSpacings -> {
                   "Columns" -> {{2}}, "Rows" -> {{Automatic}}}, 
                  BaseStyle -> {
                   ShowStringCharacters -> False, NumberMarks -> False, 
                    PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
               GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}},
                AutoDelete -> False, 
               GridBoxItemSize -> {
                "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
               BaselinePosition -> {1, 1}], True -> GridBox[{{
                 GridBox[{{
                    TagBox["\"10.0 MB\"", "SummaryItem"]}}, 
                  GridBoxAlignment -> {
                   "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
                  AutoDelete -> False, 
                  GridBoxItemSize -> {
                   "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                  GridBoxSpacings -> {
                   "Columns" -> {{2}}, "Rows" -> {{Automatic}}}, 
                  BaseStyle -> {
                   ShowStringCharacters -> False, NumberMarks -> False, 
                    PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
               GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}},
                AutoDelete -> False, 
               GridBoxItemSize -> {
                "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
               BaselinePosition -> {1, 1}]}, 
            Dynamic[Typeset`open$$], ImageSize -> Automatic]}, 
          "SummaryPanel"], 
         ButtonBox[
          DynamicBox[
           ToBoxes[
            If[
             
             Or[$VersionNumber < 11.2, CurrentValue["RunningEvaluator"] =!= 
              "Local"], 
             Style["This object cannot be used as input.", "SummaryEmbed"], 
             BoxForm`EmbedSummaryLabel[ByteArray, 10000200, 
              Dynamic[Typeset`embedState$$], Automatic]], StandardForm]], 
          ButtonFunction :> 
          BoxForm`EmbedSummaryInterpretation[
           "Choose", ByteArray, 10000200, 
            7805993996136008700082992470090569599803849934549204330752, 
            EvaluationBox[], 
            Dynamic[Typeset`embedState$$], StandardForm, 
            ElisionsDump`embedSummaryBoxes], DefaultBaseStyle -> 
          "SummaryEmbedButton", ImageSize -> Inherited, 
          BaseStyle -> {"DialogStyle"}, Enabled -> Dynamic[
            
            And[$VersionNumber >= 11.2, CurrentValue["RunningEvaluator"] === 
             "Local", Typeset`embedState$$ === "Ready"]], Appearance -> 
          Inherited, Method -> Inherited, Evaluator -> Automatic]}, 
        "SummaryEmbedGrid"], DynamicModuleValues :> {}], 
      StyleBox["]", "NonInterpretableSummary"]}]},
   "CopyTag",
   DisplayFunction->(#& ),
   InterpretationFunction->("ByteArray[<10000000>]"& )],
  False,
  BoxID -> 7805993996136008700082992470090569599803849934549204330752,
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{3.8993055971378202`*^9},
 CellLabel->"Out[57]=",ExpressionUUID->"9819d107-b1d2-4170-bb3b-1e4eacdb54b4"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"toPacket", "[", 
   RowBox[{"task_", ",", " ", "_", ",", " ", 
    RowBox[{"{", 
     RowBox[{
     "serverSocketId_", ",", " ", "clientSocketId_", ",", " ", 
      "data_NumericArray"}], "}"}]}], "]"}], " ", ":=", " ", "\n", 
  RowBox[{"<|", "\n", "\t", 
   RowBox[{
    RowBox[{"\"\<Socket\>\"", " ", "->", " ", 
     RowBox[{"CSocket", "[", "serverSocketId", "]"}]}], ",", " ", "\n", "\t", 
    RowBox[{"\"\<SourceSocket\>\"", " ", "->", " ", 
     RowBox[{"CSocket", "[", "clientSocketId", "]"}]}], ",", " ", "\n", "\t", 
    RowBox[{"\"\<DataByteArray\>\"", " ", "->", " ", 
     RowBox[{"ByteArray", "[", "data", "]"}]}]}], "\n", "|>"}]}]], "Code",
 CellChangeTimes->{{3.8993042899471226`*^9, 3.899304354305013*^9}, {
  3.899304412976573*^9, 3.8993044914038825`*^9}},
 CellLabel->"In[13]:=",ExpressionUUID->"7a7ef1c2-f811-46b9-b2f6-7c7fa3b8735c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"CSocketListen", "[", 
   RowBox[{"port_Integer", ",", " ", "handler_"}], "]"}], " ", ":=", " ", 
  "\n", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"portName", ",", " ", "task"}], "}"}], ",", " ", "\n", "\t", 
    RowBox[{
     RowBox[{"portname", " ", "=", " ", 
      RowBox[{"ToString", "[", "port", "]"}]}], ";", " ", "\n", "\t", 
     RowBox[{"task", " ", "=", " ", 
      RowBox[{"Internal`CreateAsynchronousTask", "[", 
       RowBox[{"createServer", ",", " ", 
        RowBox[{"{", "portName", "}"}], ",", " ", 
        RowBox[{
         RowBox[{"handler", "[", 
          RowBox[{"toPacket", "[", "##", "]"}], "]"}], "&"}]}], "]"}]}], ";", 
     " ", "\n", "\t", "\n", "\t", 
     RowBox[{"(*", "Return", "*)"}], "\n", "\t", 
     RowBox[{"CSocketListener", "[", 
      RowBox[{"<|", "\n", "\t\t", 
       RowBox[{
        RowBox[{"\"\<Port\>\"", " ", "->", " ", "port"}], ",", " ", "\n", 
        "\t\t", 
        RowBox[{"\"\<Task\>\"", " ", "->", " ", "task"}], ",", " ", "\n", 
        "\t\t", 
        RowBox[{"\"\<Handler\>\"", " ", "->", " ", "handler"}]}], "\n", "\t", 
       "|>"}], "]"}]}]}], "\n", "]"}]}]], "Code",
 CellChangeTimes->{{3.8993038973678164`*^9, 3.8993039175186276`*^9}, {
  3.8993040250708747`*^9, 3.899304045016678*^9}, {3.8993041520977726`*^9, 
  3.899304260754098*^9}, {3.8993044963169165`*^9, 3.8993046030931015`*^9}},
 CellLabel->"In[14]:=",ExpressionUUID->"6913beff-13c9-4217-ad79-0303c7a9b972"],

Cell[BoxData[
 RowBox[{"CSocket", " ", "/:", " ", 
  RowBox[{"BinaryWrite", "[", 
   RowBox[{
    RowBox[{"CSocket", "[", "socketId_", "]"}], ",", " ", "bytes_ByteArray"}],
    "]"}], " ", ":=", " ", "\n"}]], "Code",
 CellChangeTimes->{{3.899304649350372*^9, 
  3.8993046848515687`*^9}},ExpressionUUID->"44fbac6a-930f-4406-b4b9-\
3cba1f275e15"]
},
WindowSize->{958, 973},
WindowMargins->{{Automatic, 0}, {Automatic, 0}},
Magnification:>1. Inherited,
FrontEndVersion->"13.3 for Microsoft Windows (64-bit) (June 3, 2023)",
StyleDefinitions->"ReverseColor.nb",
ExpressionUUID->"0382e46a-ae56-4237-8afe-e931a1a1a001"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 254, 5, 56, "Code",ExpressionUUID->"f45d236d-c245-4ecb-a4ce-88a5facc3fc7"],
Cell[815, 27, 288, 6, 56, "Code",ExpressionUUID->"69c8cc3d-30da-49fa-90e5-aece21b058a6"],
Cell[1106, 35, 317, 7, 56, "Code",ExpressionUUID->"e06d4fd0-0bb5-4ebf-9f57-62c355486680"],
Cell[1426, 44, 282, 7, 56, "Code",ExpressionUUID->"8dee5efd-81eb-4c03-ba79-249068e6660c"],
Cell[CellGroupData[{
Cell[1733, 55, 3143, 65, 228, "Code",ExpressionUUID->"0886999e-13fc-42a0-8002-c68562c3a083"],
Cell[CellGroupData[{
Cell[4901, 124, 2959, 44, 234, "Print",ExpressionUUID->"163da267-a0a8-440c-97b8-e3b530613ffa"],
Cell[7863, 170, 7559, 108, 690, "Print",ExpressionUUID->"36ff6687-f7b6-466b-8a54-915c3874be1b"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[15471, 284, 633, 12, 56, "Code",ExpressionUUID->"c9bd0472-3c9e-4525-b3ff-7a871616b4a5"],
Cell[16107, 298, 345, 6, 35, "Output",ExpressionUUID->"4c65c589-9cde-4522-87cb-ec176dda0033"]
}, Open  ]],
Cell[CellGroupData[{
Cell[16489, 309, 240, 4, 31, "Input",ExpressionUUID->"0c133fb4-d21f-4908-bb66-9bd736862157"],
Cell[16732, 315, 11328, 231, 65, "Output",ExpressionUUID->"78a5c2e0-09cb-4dc4-a2eb-b85a044835b0"]
}, Open  ]],
Cell[28075, 549, 254, 4, 31, "Input",ExpressionUUID->"880dfb84-0259-44b3-a6aa-82ad00882bdf"],
Cell[CellGroupData[{
Cell[28354, 557, 421, 10, 31, "Input",ExpressionUUID->"ea9970a7-6ca2-4b42-ab92-943f0227309e"],
Cell[28778, 569, 175, 2, 35, "Output",ExpressionUUID->"b3472b0e-b84f-4877-869e-4f784d320aa1"]
}, Open  ]],
Cell[CellGroupData[{
Cell[28990, 576, 213, 3, 31, "Input",ExpressionUUID->"74677c24-aca5-4478-b5a3-4bc209d0bb22"],
Cell[29206, 581, 152, 2, 35, "Output",ExpressionUUID->"75ab1f59-b9b2-4b34-89de-9cbaa72b5628"]
}, Open  ]],
Cell[CellGroupData[{
Cell[29395, 588, 218, 3, 31, "Input",ExpressionUUID->"fac8bb0a-097d-4e7d-ad3c-208f75b76bf4"],
Cell[29616, 593, 2177, 46, 53, "Output",ExpressionUUID->"96f35c3e-a848-44ba-a865-42be7b388d85"]
}, Open  ]],
Cell[CellGroupData[{
Cell[31830, 644, 2321, 49, 49, "Input",ExpressionUUID->"4c899f28-3243-4bf6-a58e-ec2969c2298c"],
Cell[34154, 695, 160, 2, 35, "Output",ExpressionUUID->"d1f6d004-a795-4c91-a75f-4118f56f8cb9"]
}, Open  ]],
Cell[CellGroupData[{
Cell[34351, 702, 643, 15, 31, "Input",ExpressionUUID->"dff05c68-9db6-4343-a3dd-79346509fae9"],
Cell[34997, 719, 254, 5, 35, "Output",ExpressionUUID->"eb9b314d-3ec4-4a95-a6aa-9431c37bb154"]
}, Open  ]],
Cell[CellGroupData[{
Cell[35288, 729, 213, 4, 31, "Input",ExpressionUUID->"7829c353-9c75-46a5-bd9f-16f6b14b2b80"],
Cell[35504, 735, 168, 3, 35, "Output",ExpressionUUID->"d6627bad-c9ab-4bcf-a466-798642808cbb"]
}, Open  ]],
Cell[35687, 741, 441, 9, 31, "Input",ExpressionUUID->"d0fe3f2f-db55-4053-9206-205e7c69cc82"],
Cell[CellGroupData[{
Cell[36153, 754, 202, 3, 31, "Input",ExpressionUUID->"31d9d88f-549c-48bd-81be-e6e9ba016178"],
Cell[36358, 759, 3881, 82, 76, "Output",ExpressionUUID->"9819d107-b1d2-4170-bb3b-1e4eacdb54b4"]
}, Open  ]],
Cell[40254, 844, 887, 18, 152, "Code",ExpressionUUID->"7a7ef1c2-f811-46b9-b2f6-7c7fa3b8735c"],
Cell[41144, 864, 1499, 33, 266, "Code",ExpressionUUID->"6913beff-13c9-4217-ad79-0303c7a9b972"],
Cell[42646, 899, 344, 8, 76, "Code",ExpressionUUID->"44fbac6a-930f-4406-b4b9-3cba1f275e15"]
}
]
*)

